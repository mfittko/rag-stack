# raged environment variables
# Copy to .env and adjust values for local development.
# Docker Compose reads .env automatically when run from this project directory.
# The raged CLI also reads .env from the current working directory when present.
# API and worker runtime processes still rely on exported environment variables (or Compose env injection).

# --- Docker Compose Host Ports ---
# Override these if you have port conflicts on the host machine
POSTGRES_HOST_PORT=26532
OLLAMA_HOST_PORT=11434
API_HOST_PORT=39180
SEAWEEDFS_S3_HOST_PORT=8333
SEAWEEDFS_MASTER_HOST_PORT=9333

# --- CLI Defaults ---
# raged CLI will use this when --api is not provided
RAGED_URL=http://localhost:39180

# --- RAG API ---
PORT=8080
RAGED_API_TOKEN=
# WARNING: Only disable SSRF checks in trusted local development environments
# DISABLE_SSRF_CHECK=true
BODY_LIMIT_BYTES=10485760

# --- Database ---
DATABASE_URL=postgresql://raged:raged@localhost:26532/raged
# Used by docker compose containers (defaults to in-network postgres service)
COMPOSE_DATABASE_URL=postgresql://raged:raged@postgres:5432/raged
POSTGRES_USER=raged
# NOTE: Local development default only. Use a strong password in production.
POSTGRES_PASSWORD=raged
POSTGRES_DB=raged

# --- Ollama ---
OLLAMA_URL=http://localhost:11434
OLLAMA_HOST_PORT=11434
# Embedding provider: ollama (default) or openai
EMBED_PROVIDER=openai
EMBED_MODEL=nomic-embed-text
OPENAI_BASE_URL=https://api.openai.com/v1
# For Ollama OpenAI-compatible embeddings, use: http://localhost:11434/v1
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
# OPENAI_API_KEY can be any non-empty value for some compatible local endpoints
OPENAI_API_KEY=

# --- Enrichment (optional) ---
ENRICHMENT_ENABLED=false

# --- Blob Storage (optional, SeaweedFS S3) ---
BLOB_STORE_URL=http://localhost:8333
SEAWEEDFS_S3_HOST_PORT=8333
SEAWEEDFS_MASTER_HOST_PORT=9333
BLOB_STORE_ACCESS_KEY=seaweedfs
BLOB_STORE_SECRET_KEY=seaweedfs-secret
BLOB_STORE_BUCKET=raged-raw
BLOB_STORE_THRESHOLD_BYTES=1048576  # 1MB - files larger than this are stored in blob storage
# NOTE: For production, replace with strong unique credentials.

# --- Worker (Enrichment) ---
WORKER_CONCURRENCY=4
EXTRACTOR_PROVIDER=openai  # openai, anthropic, or ollama
EXTRACTOR_MODEL_FAST=gpt-4.1-mini
EXTRACTOR_MODEL_CAPABLE=gpt-4.1-mini
EXTRACTOR_MODEL_VISION=gpt-4.1-mini
EXTRACTOR_MAX_OUTPUT_TOKENS=16384
ANTHROPIC_API_KEY=
OPENAI_API_KEY=
